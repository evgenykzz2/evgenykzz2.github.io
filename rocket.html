<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Rocket Calculator</title>
    <style>
        body {
            margin: 0;
            padding: 0;
			background-color: #FFFFFF;
			background-image: url(https://i.pinimg.com/originals/32/da/70/32da70fa743ed140848005d13d0b83ff.jpg);
			background-position: top;
			background-repeat: repeat;
			background-attachment: fixed;
			font-family: "Verdana", sans-serif;
			font-size: 1.2em;
			text-align: center;
        }
        html, body {
            min-height: 100%;
            height: 100%;
        }
        .content {
            margin: 0 10px;
			background-color: #ffffff;
			display: inline-block;
			text-align: left;
			max-width:1200px;
        }
        .info {
            background-color: gainsboro;
            padding: 15px;
			position: fixed;
			bottom: 0;
			right: 0;
        }
        ul {
            margin: 0;
        }
		.preview {
			background-color: black;
			color: #fff;
			text-align: center;
			padding: 5px 5px;
			border-radius: 6px;
 			position: fixed;
		}
	}
    </style>
</head>
<body>

<div class="content">
<p align=center><font size="32">Rocket Calculator</font></p>


<table border="1">

<tr>
<td>Rocket</td>
<td>
	<select id="Rocket">
	</select>
	
	<table border="1">
	<tr><td>Thrust-to-weight ratio</td><td> <input id="Thrust_to_weight_ratio">           </td><td></td></tr>
	<tr><td>Lift-off Mass</td><td> <input id="Lift_off_Mass">                             </td><td>Kg</td></tr>
	<tr><td>Fairing mass</td><td> <input id="Fairing_mass">                               </td><td>Kg</td></tr>
	<tr><td>Fairing jettison velocity</td><td> <input id="Fairing_jettison_velocity">     </td><td>m/s</td></tr>
	<tr><td>Fairing jettison specific velocity</td><td> <label id="Fairing_jettison_specific_velocity"    ></label></td><td>m/s</td></tr>

	<tr><td>Assumed payload mass</td><td> <input id="Assumed_payload_mass" value="750">                   </td><td>Kg</td></tr>
	
	<tr><td>Payload to Lift-off mass Ratio</td><td> <label id="Payload_to_Lift_off_mass_Ratio"    ></label></td><td>%</td></tr>
	
	<tr><td>2nd Stage mass Ratio</td><td> <input id="_2nd_Stage_mass_Ratio">                               </td><td>%</td></tr>
	<tr><td>3rd Stage mass Ratio</td><td> <input id="_3rd_Stage_mass_Ratio">                               </td><td>%</td></tr>
	
	
	<tr><td>1st Dry to Wet mass Ratio</td><td> <input type="range" min="1" max="100" value="50" class="slider" id="_1st_Dry_to_Wet_mass_Ratio_Range">
											   <input id="_1st_Dry_to_Wet_mass_Ratio"></td><td>%</td></tr>

	<tr><td>2nd Dry to Wet mass Ratio</td><td> <input type="range" min="1" max="100" value="50" class="slider" id="_2nd_Dry_to_Wet_mass_Ratio_Range">
											   <input id="_2nd_Dry_to_Wet_mass_Ratio"></td><td>%</td></tr>

	<tr><td>Transfer Orbit Stage mass Ratio</td><td> <input type="range" min="1" max="100" value="50" class="slider" id="Transfer_Orbit_Stage_mass_Ratio_Range">
											   <input id="Transfer_Orbit_Stage_mass_Ratio"></td><td>%</td></tr>

	<tr><td>Unused propellant of 1st Stage</td><td> <input type="range" min="1" max="100" value="50" class="slider" id="Unused_propellant_of_1st_Stage_Range">
											   <input id="Unused_propellant_of_1st_Stage"></td><td>%</td></tr>

	<tr><td>Unused propellant of 2nd Stage</td><td> <input type="range" min="1" max="100" value="50" class="slider" id="Unused_propellant_of_2nd_Stage_Range">
											   <input id="Unused_propellant_of_2nd_Stage"></td><td>%</td></tr>

	<tr><td>Unused propellant of Transfer Orbit Stage</td><td> <input type="range" min="1" max="100" value="50" class="slider" id="Unused_propellant_of_Transfer_Orbit_Stage_Range">
											   <input id="Unused_propellant_of_Transfer_Orbit_Stage"></td><td>%</td></tr>

	<tr><td>First stage isp sea level or at the start altitude</td><td> <input type="range" min="1" max="100" value="50" class="slider" id="First_stage_isp_sea_level_or_at_the_start_altitude_Range">
											   <input id="First_stage_isp_sea_level_or_at_the_start_altitude"></td><td>s</td></tr>

	<tr><td>First stage isp vac</td><td> <input type="range" min="1" max="100" value="50" class="slider" id="First_stage_isp_vac_Range">
											   <input id="First_stage_isp_vac"></td><td>s</td></tr>

	<tr><td>Second stage isp vac</td><td> <input type="range" min="1" max="100" value="50" class="slider" id="Second_stage_isp_vac_Range">
											   <input id="Second_stage_isp_vac"></td><td>s</td></tr>

	<tr><td>Transfer Orbit Stage isp</td><td> <input type="range" min="1" max="100" value="50" class="slider" id="Transfer_Orbit_Stage_isp_Range">
											   <input id="Transfer_Orbit_Stage_isp"></td><td>s</td></tr>

	</table>
</td>
</tr>

<tr>
<td>Fuel</td>
<td>
	<select id="Fuel">
	</select>
</td>
</tr>

<tr>
<td>Spaceport</td>
<td>
	<select id="StartingPoint">
	</select>

	<table border="1">
	<tr><td>Starting Point Altitude</td><td> <input id="Starting_Point_Altitude">           </td><td>Km</td></tr>
	<tr><td>Additional Speed</td><td> <input id="Additional_Speed"              value=0>    </td><td>m/s</td></tr>
	<tr><td>Spaceport latitude</td><td> <input id="Spaceport_latitude"          >           </td><td>grad</td></tr>
	
	<tr><td>Intermediate angle</td><td> <label id="Intermediate_angle"    ></label></td><td>grad</td></tr>
	<tr><td>Launch azimuth</td><td> <label id="Launch_azimuth"            ></label></td><td>grad</td></tr>
	<tr><td>Launch point speed</td><td> <label id="Launch_point_speed"    ></label></td><td>m/s</td></tr>
	<tr><td>Starting Point Altitude orbital velosity</td><td> <label id="Starting_Point_Altitude_orbital_velosity"    ></label></td><td>m/s</td></tr>
	<tr><td>Absolute orbital velocity</td><td> <label id="Absolute_orbital_velocity"    ></label></td><td>m/s</td></tr>
	<tr><td>Orbital velocity</td><td> <label id="Orbital_velocity"    ></label></td><td>m/s</td></tr>
	<tr><td>Orbital velocity increment due to the Earth rotation</td><td> <label id="Orbital_velocity_increment_due_to_the_Earth_rotation"    ></label></td><td>m/s</td></tr>
	<tr><td>Specific velocity for circular orbit</td><td> <label id="Specific_velocity_for_circular_orbit"    ></label></td><td>m/s</td></tr>
	<tr><td>Specific velocity for target orbit</td><td> <label id="Specific_velocity_for_target_orbit"    ></label></td><td>m/s</td></tr>
	<tr><td>Specific velocity for LEO</td><td> <label id="Specific_velocity_for_LEO"    ></label></td><td>m/s</td></tr>
	
	</table>	
</td>
</tr>

<tr>
<td>Orbit</td>
<td>
	<select id="Orbit">
	</select>
	<table border="1">
	<tr><td>Orbit Perigee</td><td> <input id="Orbit_Perigee"                    value=200>  </td><td>Km</td></tr>
	<tr><td>Orbit Apogee</td><td> <input id="Orbit_Apogee"                      value=0>    </td><td>Km</td></tr>
	<tr><td>Orbit Inclination</td><td> <input id="Orbit_Inclination"            value=28.5> </td><td>grad</td></tr>	
	</table>	
</td>
</tr>

<tr>
<td>Losses</td>
<td>
	<table border="1">
	<tr><td>Gravity losses at specific altitude</td><td> <label id="Gravity_losses_at_specific_altitude"    ></label></td><td>m/s</td></tr>
	<tr><td>Gravity losses</td><td> <label id="Gravity_losses"            ></label></td><td>m/s</td></tr>
	<tr><td>Aerodynamic losses</td><td> <label id="Aerodynamic_losses"    ></label></td><td>m/s</td></tr>
	<tr><td>Summary losses</td><td> <label id="Summary_losses"    ></label></td><td>m/s</td></tr>
	<tr><td>Assumed losses</td><td> <label id="Assumed_losses"    ></label></td><td>%</td></tr>
	<tr><td>Specific velocity with losses</td><td> <label id="Specific_velocity_with_losses"    ></label></td><td>m/s</td></tr>
	</table>
</td>
</tr>

<tr>
<td>Output</td>
<td>
	<table border="1">
	<tr><td>First stage average trajectory isp</td><td> <label id="First_stage_average_trajectory_isp"    ></label></td><td>s</td></tr>
	<tr><td>First stage specific velocity</td><td> <label id="First_stage_specific_velocity"    ></label></td><td>m/s</td></tr>
	<tr><td>First stage final mass</td><td> <label id="First_stage_final_mass"    ></label></td><td>Kg</td></tr>
	<tr><td>First stage propellant mass</td><td> <label id="First_stage_propellant_mass"    ></label></td><td>Kg</td></tr>
	<tr><td>First stage dry mass</td><td> <label id="First_stage_dry_mass"    ></label></td><td>Kg</td></tr>
	
	<tr><td>Second stage specific velocity</td><td> <label id="Second_stage_specific_velocity"    ></label></td><td>m/s</td></tr>
	<tr><td>Second stage total (Start) mass</td><td> <label id="Second_stage_total_Start_mass"    ></label></td><td>Kg</td></tr>
	<tr><td>Second stage total mass before fairing jettison</td><td> <label id="Second_stage_total_mass_before_fairing_jettison"    ></label></td><td>Kg</td></tr>
	<tr><td>Second stage final mass</td><td> <label id="Second_stage_final_mass"    ></label></td><td>Kg</td></tr>
	<tr><td>Second stage propellant mass</td><td> <label id="Second_stage_propellant_mass"    ></label></td><td>Kg</td></tr>
	<tr><td>Second stage dry mass</td><td> <label id="Second_stage_dry_mass"    ></label></td><td>Kg</td></tr>
	
	<tr><td>Transfer Orbit stage specific velocity (required)</td><td> <label id="Transfer_Orbit_stage_specific_velocity_required"    ></label></td><td>m/s</td></tr>
	<tr><td>Transfer Orbit stage total (Start) mass</td><td> <label id="Transfer_Orbit_stage_total_Start_mass"    ></label></td><td>Kg</td></tr>
	<tr><td>Transfer Orbit stage final mass</td><td> <label id="Transfer_Orbit_stage_final_mass"    ></label></td><td>Kg</td></tr>
	<tr><td>Transfer Orbit stage propellant mass</td><td> <label id="Transfer_Orbit_stage_propellant_mass"    ></label></td><td>Kg</td></tr>
	<tr><td>Transfer Orbit stage dry mass</td><td> <label id="Transfer_Orbit_stage_dry_mass"    ></label></td><td>Kg</td></tr>
	</table>
</td>
</tr>


<tr>
<td>Result</td>
<td>
	<table border="1">
	<tr><td>Payload mass (calculated)</td><td> <label id="Payload_mass_calculated"></label></td><td>Kg</td></tr>
	<tr><td>Payload change</td><td> <label id="Payload_change"    ></label></td><td>%</td></tr>
	</table>
</td>
</tr>

</table>
</div>

<script>
	var elStartingPoint = document.querySelector('#StartingPoint');

	var elStarting_Point_Altitude = document.querySelector('#Starting_Point_Altitude');
	var elAdditional_Speed = document.querySelector('#Additional_Speed');
	var elOrbit_Perigee = document.querySelector('#Orbit_Perigee');
	var elOrbit_Apogee = document.querySelector('#Orbit_Apogee');
	var elSpaceport_latitude = document.querySelector('#Spaceport_latitude');
	var elOrbit_Inclination = document.querySelector('#Orbit_Inclination');

	var elIntermediate_angle = document.querySelector('#Intermediate_angle');
	var elLaunch_azimuth = document.querySelector('#Launch_azimuth');
	var elLaunch_point_speed = document.querySelector('#Launch_point_speed');
	var elStarting_Point_Altitude_orbital_velosity = document.querySelector('#Starting_Point_Altitude_orbital_velosity');
	var elAbsolute_orbital_velocity = document.querySelector('#Absolute_orbital_velocity');
	var elOrbital_velocity = document.querySelector('#Orbital_velocity');
	var elOrbital_velocity_increment_due_to_the_Earth_rotation = document.querySelector('#Orbital_velocity_increment_due_to_the_Earth_rotation');
	var elSpecific_velocity_for_circular_orbit = document.querySelector('#Specific_velocity_for_circular_orbit');
	var elSpecific_velocity_for_target_orbit = document.querySelector('#Specific_velocity_for_target_orbit');
	var elSpecific_velocity_for_LEO = document.querySelector('#Specific_velocity_for_LEO');

	var elOrbit = document.querySelector('#Orbit');

	//=== ROCKET ===
	var elRocket = document.querySelector('#Rocket');
	var elThrust_to_weight_ratio = document.querySelector('#Thrust_to_weight_ratio');
	
	var elLift_off_Mass = document.querySelector('#Lift_off_Mass');
	var elFairing_mass = document.querySelector('#Fairing_mass');
	var elFairing_jettison_velocity = document.querySelector('#Fairing_jettison_velocity');
	var elFairing_jettison_specific_velocity = document.querySelector('#Fairing_jettison_specific_velocity');
	
	var elAssumed_payload_mass = document.querySelector('#Assumed_payload_mass');
	var elPayload_to_Lift_off_mass_Ratio = document.querySelector('#Payload_to_Lift_off_mass_Ratio');
	var el2nd_Stage_mass_Ratio = document.querySelector('#_2nd_Stage_mass_Ratio');
	var el3rd_Stage_mass_Ratio = document.querySelector('#_3rd_Stage_mass_Ratio');
	var el1st_Dry_to_Wet_mass_Ratio_Range = document.querySelector('#_1st_Dry_to_Wet_mass_Ratio_Range');
	var el1st_Dry_to_Wet_mass_Ratio = document.querySelector('#_1st_Dry_to_Wet_mass_Ratio');
	var el2nd_Dry_to_Wet_mass_Ratio_Range = document.querySelector('#_2nd_Dry_to_Wet_mass_Ratio_Range');
	var el2nd_Dry_to_Wet_mass_Ratio = document.querySelector('#_2nd_Dry_to_Wet_mass_Ratio');
	var elTransfer_Orbit_Stage_mass_Ratio_Range = document.querySelector('#Transfer_Orbit_Stage_mass_Ratio_Range');
	var elTransfer_Orbit_Stage_mass_Ratio = document.querySelector('#Transfer_Orbit_Stage_mass_Ratio');
	var elUnused_propellant_of_1st_Stage_Range = document.querySelector('#Unused_propellant_of_1st_Stage_Range');
	var elUnused_propellant_of_1st_Stage = document.querySelector('#Unused_propellant_of_1st_Stage');
	var elUnused_propellant_of_2nd_Stage_Range = document.querySelector('#Unused_propellant_of_2nd_Stage_Range');
	var elUnused_propellant_of_2nd_Stage = document.querySelector('#Unused_propellant_of_2nd_Stage');
	var elUnused_propellant_of_Transfer_Orbit_Stage_Range = document.querySelector('#Unused_propellant_of_Transfer_Orbit_Stage_Range');
	var elUnused_propellant_of_Transfer_Orbit_Stage = document.querySelector('#Unused_propellant_of_Transfer_Orbit_Stage');
	var elFirst_stage_isp_sea_level_or_at_the_start_altitude_Range = document.querySelector('#First_stage_isp_sea_level_or_at_the_start_altitude_Range');
	var elFirst_stage_isp_sea_level_or_at_the_start_altitude = document.querySelector('#First_stage_isp_sea_level_or_at_the_start_altitude');
	var elFirst_stage_isp_vac_Range = document.querySelector('#First_stage_isp_vac_Range');
	var elFirst_stage_isp_vac = document.querySelector('#First_stage_isp_vac');
	var elSecond_stage_isp_vac_Range= document.querySelector('#Second_stage_isp_vac_Range');
	var elSecond_stage_isp_vac = document.querySelector('#Second_stage_isp_vac');
	var elTransfer_Orbit_Stage_isp_Range = document.querySelector('#Transfer_Orbit_Stage_isp_Range');
	var elTransfer_Orbit_Stage_isp = document.querySelector('#Transfer_Orbit_Stage_isp');

	var elFuel = document.querySelector('#Fuel');
	
	//=== Loses ===
	var elGravity_losses_at_specific_altitude = document.querySelector('#Gravity_losses_at_specific_altitude');
	var elGravity_losses = document.querySelector('#Gravity_losses');
	var elAerodynamic_losses = document.querySelector('#Aerodynamic_losses');
	var elSummary_losses = document.querySelector('#Summary_losses');
	var elAssumed_losses = document.querySelector('#Assumed_losses');
	var elSpecific_velocity_with_losses = document.querySelector('#Specific_velocity_with_losses');
	
	//=== Outout ===
	var elFirst_stage_average_trajectory_isp = document.querySelector('#First_stage_average_trajectory_isp');
	var elFirst_stage_specific_velocity = document.querySelector('#First_stage_specific_velocity');
	var elFirst_stage_final_mass = document.querySelector('#First_stage_final_mass');
	var elFirst_stage_propellant_mass = document.querySelector('#First_stage_propellant_mass');
	var elFirst_stage_dry_mass = document.querySelector('#First_stage_dry_mass');

	var elSecond_stage_specific_velocity = document.querySelector('#Second_stage_specific_velocity');
	var elSecond_stage_total_Start_mass = document.querySelector('#Second_stage_total_Start_mass');
	var elSecond_stage_total_mass_before_fairing_jettison = document.querySelector('#Second_stage_total_mass_before_fairing_jettison');
	var elSecond_stage_final_mass = document.querySelector('#Second_stage_final_mass');
	var elSecond_stage_propellant_mass = document.querySelector('#Second_stage_propellant_mass');
	var elSecond_stage_dry_mass = document.querySelector('#Second_stage_dry_mass');
	
	var elTransfer_Orbit_stage_specific_velocity_required = document.querySelector('#Transfer_Orbit_stage_specific_velocity_required');
	var elTransfer_Orbit_stage_total_Start_mass = document.querySelector('#Transfer_Orbit_stage_total_Start_mass');
	var elTransfer_Orbit_stage_final_mass = document.querySelector('#Transfer_Orbit_stage_final_mass');
	var elTransfer_Orbit_stage_propellant_mass = document.querySelector('#Transfer_Orbit_stage_propellant_mass');
	var elTransfer_Orbit_stage_dry_mass = document.querySelector('#Transfer_Orbit_stage_dry_mass');

	var elPayload_mass_calculated = document.querySelector('#Payload_mass_calculated');	
	var elPayload_change = document.querySelector('#Payload_change');
	
	window.onload = onPageLoad;
	
	var s_start_point_count = 11;
	var s_start_point_data = [["Cape Canaveral",    	28.5,  -80.33, 0.1],
						      ["Baikonur",              45.57,  63.18, 0.1],
							  ["Kuru",               	 5.14, -52.46, 0.1],
							  ["Alcantara",             -2.28, -44.38, 0.05],
							  ["Camden",                30.92, -81.5,  0],
							  ["Kodiak",            	57.43, 152.33, 0],
							  ["Rocket Lab LC-1",   	39.25, 177.87, 0.1],
							  ["Vandenberg",   			34.72, 120.62, 0.1],
							  ["Omelek Island",      	 9.3,  167.73, 0],
							  ["Stennis Space Center",  30.35, -89.6, 0],
							  ["Sea Launch",  	         0.0, -154.0, 0.02]];

	var s_orbit_count = 7;
	var s_orbit_data = [["LEO",   200,     0, -1, 0],
	                    ["SSO",   500,     0, 98, 0],
						["GEO",   35786,   0,  0, 0],
						["GTO",   200, 35786,  0, 0],
						["Moon",  200,    -1, -1, 3100],
						["Mars",  200,    -1, -1, 3600],
						["Venus", 200,    -1, -1, 3500]];
							  
	var s_fuel_count = 3;
	var s_fuel_name = ["Lox/Kero", "Lox/Methan", "Lox/LH2"];
	var s_fuel_data_min = [[6,  5,  10, 1, 1, 0.5, 260, 300, 320, 320],
						   [7,  6,  10, 1, 1, 0.5, 270, 310, 330, 320],
						   [10, 9,  10, 1, 1, 0.5, 350, 400, 450, 320]];
	var s_fuel_data_max = [[9,  10, 30, 3, 3,   5, 310, 340, 360, 370],
						   [10, 11, 30, 3, 3,   5, 320, 355, 375, 370],
						   [14, 14, 30, 3, 3,   5, 370, 430, 470, 370]];
	
	var s_rocket_count = 16;
	var s_rocket_data = [["Rocket 1",                      1.19,  33400,  150,  3500, 771,   26.94, 0,    8,     10,     20,    1.5, 1.5, 1,   290.5, 327,   365, 320, "Lox/RP-1",   "Canaveral",       "LEO"],
						 ["Rocket 2",                      1.19,  33400,  100,  3500, 458,   26.94, 5,    9.92,  12.38,  20,    2,   2,   1,   282.0, 321,   352, 320, "Lox/RP-1",   "Canaveral",       "SSO"],
						 ["Zenit-2",                       1.605, 459000, 1800, 3500, 13470, 23.20, 0,    7.93,  9.15,   20,    1.2, 1.2, 0.8, 309.0, 336,   349, 352, "Lox/RG-1",   "Baikonur",        "LEO"],
						 ["Zenit-3SL",                     1.57,  468240, 1850, 3500, 3170,  24.32, 4.88, 7.78,  9.15,   14.42, 1.2, 1.2, 0.8, 309.5, 337.2, 349, 361, "Lox/RG-1",   "Sea Launch",      "GEO"],
						 ["Delta-IV Medium",               1.21,  264840, 2800, 4500, 11470, 14.51, 0,    11.70, 11.79,  20,    2,   2,   0.8, 360.0, 412,   462, 300, "Lox/LH2",    "Canaveral",       "LEO"],
						 ["Vanguard II",                   1.36,  10100,     0, 3500, 10,    23.60, 2.18, 10.53, 32.07,  14.76, 2,   2,   0,   248.0, 270,   319, 250, "Mixt",       "Canaveral",       "LEO"],
						 ["Falcon9 V1.0",                  1.22,  318000, 1000, 3500, 9000,  19.18, 0.00, 6.74,  5.96,   20.00, 1.5, 1.5, 1,   266.0, 304,   336, 300, "Lox/RP-1",   "Canaveral",       "LEO"],
						 ["Falcon 1e",                     1.19,  47750,  145,  3500, 650,   11.90, 0.00, 6.13,  11.07,  20.00, 2,   2,   1,   263.0, 304,   317, 300, "Lox/RP-1",   "Canaveral",       "LEO"],
						 ["Electron",                      1.32,  12550,  44,   3500, 240,   21.39, 0.00, 9.31,  10.42,  20.00, 2,   2,   1,   256.0, 303,   333, 240, "Lox/Kero",   "Rocket Lab LC-1", "LEO"],
						 ["Electron Curie",                1.32,  12550,  44,   3500, 100,   21.39, 5.00, 9.31,  10.42,  20.00, 1.5, 1.5, 1,   256.0, 303,   333, 240, "Lox/Kero",   "Rocket Lab LC-1", "SSO"],
						 ["Launcher One",                  1.44,  23300,  100,  3500, 300,   12.66, 0.00, 8.00,   9.00,  20.00, 2,   2,   1,   263.0, 304,   317, 300, "Lox/RP-1",   "Canaveral",       "SSO"],
						 ["Terran 1 (Relativity)",         1.2,   52730,  400,  3500, 1250,  24.46, 0.00, 8.00,   9.00,  20.00, 2,   2,   1,   286.0, 326,   360, 300, "Lox/Methan", "Canaveral",       "LEO"],
						 ["XS-1 tactical missile (Astra)", 1.6,   7560,   30,   3500, 100,   19.44, 0.00, 9.50,  10.00,  20.00, 2,   2,   1,   266.0, 304,   336, 300, "Lox/RP-1",   "Canaveral",       "LEO"],
						 ["Firefly Alpha",                 1.25,  54000,  330,  3500, 1000,  25.00, 0.00, 7.50,  6.74,   20.00, 2,   2,   1,   265.0, 295,   322, 300, "Lox/RP-1",   "Canaveral",       "LEO"],
						 ["abl RS1 Old",                   1.2,   26459,  300,  3500, 900,   15.75, 0.00, 5.00,  4.00,   20.00, 2,   2,   1,   262.0, 308,   345, 300, "Lox/RP-1",   "Camden",          "LEO"],
						 ["abl RS1",                       1.2,   47627,  400,  3500, 1200,  18.06, 0.00, 5.00,  5.00,   20.00, 2,   2,   1,   265.0, 295.6, 322, 300, "Lox/RP-1",   "Camden",          "LEO"]
						 ];
	
	function Rad2Deg(radians)
	{
		return radians * (180.0/Math.PI);
	}
	
	function Deg2Rad(degrees)
	{
		return degrees * (Math.PI/180.0);
	}
	
	function Calculate()
	{
		var Starting_Point_Altitude = parseFloat(elStarting_Point_Altitude.value);
		var Additional_Speed = parseFloat(elAdditional_Speed.value);
		var Orbit_Perigee = parseFloat(elOrbit_Perigee.value);
		var Orbit_Apogee = parseFloat(elOrbit_Apogee.value);
		var Spaceport_latitude = parseFloat(elSpaceport_latitude.value);
		var Orbit_Inclination = parseFloat(elOrbit_Inclination.value);
		
		var Intermediate_angle = Orbit_Inclination > Spaceport_latitude ?
				(Rad2Deg(Math.asin(Math.cos(Deg2Rad(Orbit_Inclination))/Math.cos(Deg2Rad(Spaceport_latitude))))) :
				(90.0-Rad2Deg(Math.asin(1.0-(Math.cos(Deg2Rad(Orbit_Inclination))/Math.cos(Deg2Rad(Spaceport_latitude))))));
		elIntermediate_angle.textContent = Intermediate_angle.toFixed(2);
		
		var Launch_point_speed = 460.0*Math.cos(Deg2Rad(Spaceport_latitude));
		elLaunch_point_speed.textContent = Launch_point_speed.toFixed(2);
		
		var Starting_Point_Altitude_orbital_velosity = Math.sqrt(398730000000.0/(6378.0));
		elStarting_Point_Altitude_orbital_velosity.textContent = Starting_Point_Altitude_orbital_velosity.toFixed(2);
		
		var Absolute_orbital_velocity = Math.sqrt(398730000000.0/(6378.0+Orbit_Perigee));
		elAbsolute_orbital_velocity.textContent = Absolute_orbital_velocity.toFixed(2);
		
		var Orbital_velocity = Math.sqrt(Launch_point_speed*Launch_point_speed + Absolute_orbital_velocity*Absolute_orbital_velocity
										-2.0*Launch_point_speed*Absolute_orbital_velocity*Math.sin(Deg2Rad(Intermediate_angle)));
		elOrbital_velocity.textContent = Orbital_velocity.toFixed(2);
		
		var Orbital_velocity_increment_due_to_the_Earth_rotation = Absolute_orbital_velocity - Orbital_velocity;
		elOrbital_velocity_increment_due_to_the_Earth_rotation.textContent = Orbital_velocity_increment_due_to_the_Earth_rotation.toFixed(2);
		
		var Launch_azimuth = Rad2Deg(Math.acos(Absolute_orbital_velocity/Orbital_velocity*Math.cos(Deg2Rad(Intermediate_angle))));
		elLaunch_azimuth.textContent = Launch_azimuth.toFixed(2);
		
		var Specific_velocity_for_circular_orbit = Starting_Point_Altitude_orbital_velosity
				+Starting_Point_Altitude_orbital_velosity*(7906.0/Math.sqrt(0.5*(Starting_Point_Altitude_orbital_velosity*Starting_Point_Altitude_orbital_velosity+Absolute_orbital_velocity*Absolute_orbital_velocity))-1.0)
				+Absolute_orbital_velocity*(1.0-Absolute_orbital_velocity/Math.sqrt(0.5*(Starting_Point_Altitude_orbital_velosity*Starting_Point_Altitude_orbital_velosity+Absolute_orbital_velocity*Absolute_orbital_velocity)))
				-Orbital_velocity_increment_due_to_the_Earth_rotation;
		elSpecific_velocity_for_circular_orbit.textContent = Specific_velocity_for_circular_orbit.toFixed(2);
		
		var Specific_velocity_for_target_orbit = (Orbit_Apogee == 0) ?
			Specific_velocity_for_circular_orbit : 
			(Specific_velocity_for_circular_orbit
			  +Absolute_orbital_velocity*(Absolute_orbital_velocity/Math.sqrt(0.5*(Absolute_orbital_velocity*Absolute_orbital_velocity+398730000000.0/(6378.0+Orbit_Apogee)))-1.0));
		elSpecific_velocity_for_target_orbit.textContent = Specific_velocity_for_target_orbit.toFixed(2);
		
		var Specific_velocity_for_LEO = 8026.0-Orbital_velocity_increment_due_to_the_Earth_rotation-Additional_Speed;
		elSpecific_velocity_for_LEO.textContent = Specific_velocity_for_LEO.toFixed(2);
		
		var Fairing_jettison_velocity = parseFloat(elFairing_jettison_velocity.value);
		var Fairing_mass = parseFloat(elFairing_mass.value);
		var Lift_off_Mass = parseFloat(elLift_off_Mass.value);
		var Assumed_payload_mass = parseFloat(elAssumed_payload_mass.value);
		var Thrust_to_weight_ratio = parseFloat(elThrust_to_weight_ratio.value);
		var First_stage_isp_vac = parseFloat(elFirst_stage_isp_vac.value);
		var First_stage_isp_sea_level_or_at_the_start_altitude = parseFloat(elFirst_stage_isp_sea_level_or_at_the_start_altitude.value);
		var v2nd_Stage_mass_Ratio = parseFloat(el2nd_Stage_mass_Ratio.value);
		var v3rd_Stage_mass_Ratio = parseFloat(el3rd_Stage_mass_Ratio.value);
		var v1st_Dry_to_Wet_mass_Ratio = parseFloat(el1st_Dry_to_Wet_mass_Ratio.value);
		var v2nd_Dry_to_Wet_mass_Ratio = parseFloat(el2nd_Dry_to_Wet_mass_Ratio.value);
		var Unused_propellant_of_1st_Stage = parseFloat(elUnused_propellant_of_1st_Stage.value);
		var Unused_propellant_of_2nd_Stage = parseFloat(elUnused_propellant_of_2nd_Stage.value);
		var Second_stage_isp_vac = parseFloat(elSecond_stage_isp_vac.value);
		var Transfer_Orbit_Stage_isp = parseFloat(elTransfer_Orbit_Stage_isp.value);
		var Transfer_Orbit_Stage_mass_Ratio = parseFloat(elTransfer_Orbit_Stage_mass_Ratio.value);
		var Unused_propellant_of_Transfer_Orbit_Stage = parseFloat(elUnused_propellant_of_Transfer_Orbit_Stage.value);
		
		var Payload_to_Lift_off_mass_Ratio = Assumed_payload_mass / Lift_off_Mass;
		elPayload_to_Lift_off_mass_Ratio.textContent = (Payload_to_Lift_off_mass_Ratio * 100.0).toFixed(2);
		
		
		var Gravity_losses_at_specific_altitude = 9.81*(500.0/Math.sqrt((1.015*Math.sqrt((((Thrust_to_weight_ratio-1.0)*9.81)*
				((Math.exp(112.13/((First_stage_isp_vac-(First_stage_isp_vac-First_stage_isp_sea_level_or_at_the_start_altitude)*0.169)+
				(((First_stage_isp_vac-(First_stage_isp_vac-First_stage_isp_sea_level_or_at_the_start_altitude)*0.169)-First_stage_isp_sea_level_or_at_the_start_altitude)*1)/((1-0.169)*1.8872)*(-0.8612))))*
				((First_stage_isp_vac-(First_stage_isp_vac-First_stage_isp_sea_level_or_at_the_start_altitude)*0.169)/First_stage_isp_sea_level_or_at_the_start_altitude)*
				((Thrust_to_weight_ratio-1)*9.81)-(1-(Math.exp(112.13/((First_stage_isp_vac-(First_stage_isp_vac-First_stage_isp_sea_level_or_at_the_start_altitude)*0.169)+
				(((First_stage_isp_vac-(First_stage_isp_vac-First_stage_isp_sea_level_or_at_the_start_altitude)*0.169)-First_stage_isp_sea_level_or_at_the_start_altitude)*1)/((1-0.169)*1.8872)*(-0.8612))))*
				((First_stage_isp_vac-(First_stage_isp_vac-First_stage_isp_sea_level_or_at_the_start_altitude)*0.169)/First_stage_isp_sea_level_or_at_the_start_altitude))*9.81))))*9.81));
				elPayload_to_Lift_off_mass_Ratio.textContent = (Payload_to_Lift_off_mass_Ratio * 100.0).toFixed(2);
		elGravity_losses_at_specific_altitude.textContent = Gravity_losses_at_specific_altitude.toFixed(2);
		
		var Gravity_losses	= 0.94*Specific_velocity_for_LEO/8026*4/3*
		((Thrust_to_weight_ratio<1.46)
				? Gravity_losses_at_specific_altitude*(1.5+2.5*(Thrust_to_weight_ratio-1.17)-4.25*(Thrust_to_weight_ratio-1.17)*(Thrust_to_weight_ratio-1.17))
				: 1.865*Gravity_losses_at_specific_altitude);
		elGravity_losses.textContent = Gravity_losses.toFixed(2);
		
		var Aerodynamic_losses = Math.exp(-Starting_Point_Altitude/7.16)*0.94*Specific_velocity_for_LEO/8026*Math.pow(Math.pow(Lift_off_Mass/2945000, 0.33333333), -0.9) * (0.045+0.1*Math.pow(Thrust_to_weight_ratio-1.17, 1.5))*1000;
		elAerodynamic_losses.textContent = Aerodynamic_losses.toFixed(2);
		
		var Summary_losses = Gravity_losses+Aerodynamic_losses+Specific_velocity_for_LEO/8026*140;
		elSummary_losses.textContent = Summary_losses.toFixed(2);
		
		var Assumed_losses = Summary_losses/Specific_velocity_for_LEO;
		elAssumed_losses.textContent = (Assumed_losses*100.0).toFixed(2);
		
		var Specific_velocity_with_losses = Specific_velocity_for_target_orbit+Summary_losses;
		elSpecific_velocity_with_losses.textContent = Specific_velocity_with_losses.toFixed(2);
		
		
		//=== Outout ===
		var First_stage_average_trajectory_isp = 0.145*First_stage_isp_sea_level_or_at_the_start_altitude+0.855*First_stage_isp_vac;
		elFirst_stage_average_trajectory_isp.textContent = First_stage_average_trajectory_isp.toFixed(2);
		
		var First_stage_propellant_mass = (Lift_off_Mass*(1-v2nd_Stage_mass_Ratio/100))*(1-v1st_Dry_to_Wet_mass_Ratio/100);
		elFirst_stage_propellant_mass.textContent = First_stage_propellant_mass.toFixed(2);
		
		var First_stage_dry_mass = (Lift_off_Mass*(1-v2nd_Stage_mass_Ratio/100))*(v1st_Dry_to_Wet_mass_Ratio/100);
		elFirst_stage_dry_mass.textContent = First_stage_dry_mass.toFixed(2);
		
		var First_stage_final_mass = Lift_off_Mass-First_stage_propellant_mass/100*(100-Unused_propellant_of_1st_Stage);
		elFirst_stage_final_mass.textContent = First_stage_final_mass.toFixed(2);
		
		var First_stage_specific_velocity = 9.80665*First_stage_average_trajectory_isp*Math.log(Lift_off_Mass/First_stage_final_mass);
		elFirst_stage_specific_velocity.textContent = First_stage_specific_velocity.toFixed(2);
		

		var Fairing_jettison_specific_velocity = (Fairing_jettison_velocity*1.2 > First_stage_specific_velocity) ? Fairing_jettison_velocity*1.2 : First_stage_specific_velocity+100;
		elFairing_jettison_specific_velocity.textContent = Fairing_jettison_specific_velocity.toFixed(2);
		
		var Second_stage_total_Start_mass = Lift_off_Mass*(v2nd_Stage_mass_Ratio/100);
		elSecond_stage_total_Start_mass.textContent = Second_stage_total_Start_mass.toFixed(2);

		var Second_stage_total_mass_before_fairing_jettison =1.0/(Math.exp((Fairing_jettison_specific_velocity-First_stage_specific_velocity)/(Second_stage_isp_vac*9.80665))/Second_stage_total_Start_mass);
		elSecond_stage_total_mass_before_fairing_jettison.textContent = Second_stage_total_mass_before_fairing_jettison.toFixed(2);

		var Second_stage_final_mass;
		var Second_stage_specific_velocity;
		if (v3rd_Stage_mass_Ratio == 0)
		{
			Second_stage_specific_velocity = (Specific_velocity_with_losses-First_stage_specific_velocity);
			Second_stage_final_mass = 1.0/(Math.exp((Second_stage_specific_velocity-(Fairing_jettison_specific_velocity-First_stage_specific_velocity))/
				(Second_stage_isp_vac*9.80665))/(Second_stage_total_mass_before_fairing_jettison-Fairing_mass));
		} else
		{
			Second_stage_final_mass = Second_stage_total_Start_mass-((Lift_off_Mass*(v2nd_Stage_mass_Ratio-v3rd_Stage_mass_Ratio)/100)*
					(1.0-v2nd_Dry_to_Wet_mass_Ratio/100))/100*(100-Unused_propellant_of_2nd_Stage);
			Second_stage_specific_velocity =
				(9.80665*Second_stage_isp_vac*Math.log(Second_stage_total_Start_mass/Second_stage_total_mass_before_fairing_jettison)
				+9.80665*Second_stage_isp_vac*Math.log((Second_stage_total_mass_before_fairing_jettison-Fairing_mass)/Second_stage_final_mass));
		}
		elSecond_stage_final_mass.textContent = Second_stage_final_mass.toFixed(2);
		elSecond_stage_specific_velocity.textContent = Second_stage_specific_velocity.toFixed(2);
		
		var Second_stage_dry_mass = v3rd_Stage_mass_Ratio == 0 ?
				(Second_stage_total_Start_mass-Fairing_mass-Assumed_payload_mass)*v2nd_Dry_to_Wet_mass_Ratio/100 :
				(Second_stage_total_Start_mass-Second_stage_final_mass)*(1+Unused_propellant_of_2nd_Stage/100)/
					(1.0/(v2nd_Dry_to_Wet_mass_Ratio/100)-1);
		elSecond_stage_dry_mass.textContent = Second_stage_dry_mass.toFixed(2);
		
		var Second_stage_propellant_mass = Second_stage_dry_mass*(100.0/v2nd_Dry_to_Wet_mass_Ratio)-Second_stage_dry_mass;
		elSecond_stage_propellant_mass.textContent = Second_stage_propellant_mass.toFixed(2);
		
		var Transfer_Orbit_stage_specific_velocity_required = v3rd_Stage_mass_Ratio == 0 ? 0 :
			(Specific_velocity_with_losses-First_stage_specific_velocity-Second_stage_specific_velocity);
		elTransfer_Orbit_stage_specific_velocity_required.textContent = Transfer_Orbit_stage_specific_velocity_required.toFixed(2);
		
		var Transfer_Orbit_stage_total_Start_mass = Second_stage_final_mass-Second_stage_dry_mass-Second_stage_propellant_mass/100*Unused_propellant_of_2nd_Stage;
		elTransfer_Orbit_stage_total_Start_mass.textContent = Transfer_Orbit_stage_total_Start_mass.toFixed(2);
		
		var Transfer_Orbit_stage_final_mass = 1.0/(Math.exp(Transfer_Orbit_stage_specific_velocity_required/(Transfer_Orbit_Stage_isp*9.80665))/Transfer_Orbit_stage_total_Start_mass) ;
		elTransfer_Orbit_stage_final_mass.textContent = Transfer_Orbit_stage_final_mass.toFixed(2);

		var Transfer_Orbit_stage_dry_mass = v3rd_Stage_mass_Ratio == 0 ? 0 :
			((Lift_off_Mass*v3rd_Stage_mass_Ratio/100-Fairing_mass-Assumed_payload_mass)*Transfer_Orbit_Stage_mass_Ratio/100);
		elTransfer_Orbit_stage_dry_mass.textContent = Transfer_Orbit_stage_dry_mass.toFixed(2);
		
		var Transfer_Orbit_stage_propellant_mass = Transfer_Orbit_stage_dry_mass*(100/Transfer_Orbit_Stage_mass_Ratio)-Transfer_Orbit_stage_dry_mass ;
		elTransfer_Orbit_stage_propellant_mass.textContent = Transfer_Orbit_stage_propellant_mass.toFixed(2);
		
		//=== Result ===
		var Payload_mass_calculated = v3rd_Stage_mass_Ratio == 0 ? Transfer_Orbit_stage_total_Start_mass :
			(Transfer_Orbit_stage_final_mass-Transfer_Orbit_stage_dry_mass-Transfer_Orbit_stage_propellant_mass/100*Unused_propellant_of_Transfer_Orbit_Stage);
		elPayload_mass_calculated.textContent = Payload_mass_calculated.toFixed(2);
		
		var Payload_change = Payload_mass_calculated/Assumed_payload_mass;
		elPayload_change.textContent = (Payload_change * 100.0).toFixed(2);
	}
	
	function updateStartingPoint()
	{
		elStarting_Point_Altitude.value = s_start_point_data[elStartingPoint.selectedIndex][3];
		elSpaceport_latitude.value = s_start_point_data[elStartingPoint.selectedIndex][1];
	}
	
	function updateStartingPointAndCalc()
	{
		updateStartingPoint();
		Calculate();
	}

	function updateOrbit()
	{
		elOrbit_Perigee.value = s_orbit_data[elOrbit.selectedIndex][1];
		
		if (s_orbit_data[elOrbit.selectedIndex][2] < 0)
			elOrbit_Apogee.value = elSpaceport_latitude.value;
		else
			elOrbit_Apogee.value = s_orbit_data[elOrbit.selectedIndex][2];
			
		if (s_orbit_data[elOrbit.selectedIndex][3] < 0)
			elOrbit_Inclination.value = elSpaceport_latitude.value;	
		else
			elOrbit_Inclination.value = s_orbit_data[elOrbit.selectedIndex][3];
	}
	
	function updateOrbitAndCalc()
	{
		updateOrbit();
		Calculate();
	}
	
	function updateRocket()
	{
		elThrust_to_weight_ratio.value = s_rocket_data[elRocket.selectedIndex][1];
		elLift_off_Mass.value = s_rocket_data[elRocket.selectedIndex][2];
		elFairing_mass.value = s_rocket_data[elRocket.selectedIndex][3];
		elFairing_jettison_velocity.value = s_rocket_data[elRocket.selectedIndex][4];
		elAssumed_payload_mass.value = s_rocket_data[elRocket.selectedIndex][5];
		el2nd_Stage_mass_Ratio.value = s_rocket_data[elRocket.selectedIndex][6];
		el3rd_Stage_mass_Ratio.value = s_rocket_data[elRocket.selectedIndex][7];
		
		el1st_Dry_to_Wet_mass_Ratio.value = s_rocket_data[elRocket.selectedIndex][8];
		el2nd_Dry_to_Wet_mass_Ratio.value = s_rocket_data[elRocket.selectedIndex][9];
		elTransfer_Orbit_Stage_mass_Ratio.value = s_rocket_data[elRocket.selectedIndex][10];
		elUnused_propellant_of_1st_Stage.value = s_rocket_data[elRocket.selectedIndex][11];
		elUnused_propellant_of_2nd_Stage.value = s_rocket_data[elRocket.selectedIndex][12];
		elUnused_propellant_of_Transfer_Orbit_Stage.value = s_rocket_data[elRocket.selectedIndex][13];
		elFirst_stage_isp_sea_level_or_at_the_start_altitude.value = s_rocket_data[elRocket.selectedIndex][14];
		elFirst_stage_isp_vac.value = s_rocket_data[elRocket.selectedIndex][15];
		elSecond_stage_isp_vac.value = s_rocket_data[elRocket.selectedIndex][16];
		elTransfer_Orbit_Stage_isp.value = s_rocket_data[elRocket.selectedIndex][17];
		
		var spacePort = s_rocket_data[elRocket.selectedIndex][19];
		for (var i=0; i < s_start_point_count; ++i)
		{
			if ( s_start_point_data[i][0] == spacePort )
			{
				elStartingPoint.selectedIndex = i;
				updateStartingPoint();
				break;
			}
		}
		
		var orbit = s_rocket_data[elRocket.selectedIndex][20];
		for (var i=0; i < s_orbit_count; ++i)
		{
			if ( s_orbit_data[i][0] == orbit )
			{
				elOrbit.selectedIndex = i;
				updateOrbit();
				break;
			}
		}
		//fuel s_rocket_data[elRocket.selectedIndex][18];
	}
	
	function updateRocketAndCalc()
	{
		updateRocket();
		Calculate();
	}
	
	function onPageLoad()
	{	
		for (var i = 0; i<s_start_point_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_start_point_data[i][0];
			opt.innerHTML = s_start_point_data[i][0];
			elStartingPoint.appendChild(opt);
		}
		elStartingPoint.addEventListener('change', updateStartingPointAndCalc);
		
		for (var i = 0; i<s_rocket_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_rocket_data[i][0];
			opt.innerHTML = s_rocket_data[i][0];
			elRocket.appendChild(opt);
		}
		elRocket.addEventListener('change', updateRocketAndCalc);
		
		for (var i = 0; i<s_orbit_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_orbit_data[i][0];
			opt.innerHTML = s_orbit_data[i][0];
			elOrbit.appendChild(opt);
		}
		elOrbit.addEventListener('change', updateOrbitAndCalc);
		
		for (var i = 0; i<s_fuel_count; i++)
		{
			var opt = document.createElement('option');
			opt.value = s_fuel_name[i];
			opt.innerHTML = s_fuel_name[i];
			elFuel.appendChild(opt);
		}
		
		elStarting_Point_Altitude.addEventListener('change', Calculate);
		elAdditional_Speed.addEventListener('change', Calculate);
		elOrbit_Perigee.addEventListener('change', Calculate);
		elOrbit_Apogee.addEventListener('change', Calculate);
		elSpaceport_latitude.addEventListener('change', Calculate);
		elOrbit_Inclination.addEventListener('change', Calculate);
		
		elThrust_to_weight_ratio.addEventListener('change', Calculate);
		elLift_off_Mass.addEventListener('change', Calculate);
		elFairing_mass.addEventListener('change', Calculate);
		elFairing_jettison_velocity.addEventListener('change', Calculate);
		elAssumed_payload_mass.addEventListener('change', Calculate);
		el2nd_Stage_mass_Ratio.addEventListener('change', Calculate);
		el3rd_Stage_mass_Ratio.addEventListener('change', Calculate);
		
		el1st_Dry_to_Wet_mass_Ratio.addEventListener('change', Calculate);
		el2nd_Dry_to_Wet_mass_Ratio.addEventListener('change', Calculate);
		elTransfer_Orbit_Stage_mass_Ratio.addEventListener('change', Calculate);
		elUnused_propellant_of_1st_Stage.addEventListener('change', Calculate);
		elUnused_propellant_of_2nd_Stage.addEventListener('change', Calculate);
		elUnused_propellant_of_Transfer_Orbit_Stage.addEventListener('change', Calculate);
		elFirst_stage_isp_sea_level_or_at_the_start_altitude.addEventListener('change', Calculate);
		elFirst_stage_isp_vac.addEventListener('change', Calculate);
		elSecond_stage_isp_vac.addEventListener('change', Calculate);
		elTransfer_Orbit_Stage_isp.addEventListener('change', Calculate);
		
		updateRocket();
		updateStartingPoint();
		Calculate();
	}

</script>

</body>
</html>